var $ic,Loading,fields_count,message,uploadStart;window.select2Options={minimumResultsForSearch:10},window.initToggles=function(){return $(".status-toggler:visible").each(function(){var e;return e=$(this),e.bootstrapSwitch({size:"small"})}),$(".status-toggler").fieldChanger({event:"switchChange.bootstrapSwitch",callback:function(e){if(e.message)return message.show(e.message,e.type)}}),$(".ajax-field-changer").fieldChanger({event:"change",callback:function(e){if(e.message)return message.show(e.message,e.type)}})},window.fixCustomInputs=function(e){return initInputMask(),initColorPickers(),initCheckboxes(),initDateTimePickers(),e.find("span.select2").remove(),e.find("select.select2").each(function(){return $(this).select2(select2Options)})},window.slugGenerate=function(e){var t,n,a,i,r;if(e.length>1){for(n=$.extend({},$.fn.syncTranslit.defaults,{}),i=e,a="",t=0;t<i.length;)a+=$.fn.syncTranslit.transliterate(i.charAt(t),n),t++;return r=new RegExp("["+n.urlSeparator+"]{2,}","g"),a=a.replace(r,n.urlSeparator)}return message.show(lang_errorEmptyNameField,"warning"),""},$(document).on("click",".front-home-link",function(e){return e.preventDefault(),window.open($(this).data("href"),"_blank")}),$(document).ready(function(){return initToggles(),initColorPickers(),initCheckboxes(),$("select.select2").each(function(){return $(this).select2(select2Options)}),$(document).on("select2:select",function(e){var t,n,a;if(t=$(e.target).closest(".field-row"),t.length)return n=t.find(".input-mask"),n.inputmask("remove"),a=n.attr("class").replace(/inputmask-\d/i,""),n.attr("class",a),n.addClass("inputmask-"+e.params.data.id),initInputMask()}),$(document).on("click",".close-me",function(){return $(this).parent().removeClass("active").fadeOut(100)}),$(document).on("click",".slug-generate",function(e){var t,n;return e.preventDefault(),t=$(this).data("from_id")||".name_"+lang,n=$(this).data("target_id")||"#slug",$(n).val(slugGenerate($(t).val())),!1}),$(document).on("click",".sidebar-menu .create-label",function(e){return e.preventDefault(),document.location=$(this).data("href")}),$(".with-loading").on("click",function(){return $(this).find("loading").length||new Loading($(this)),setTimeout(function(e){return function(){var t;if(t=$(e).closest("form"),t.length)return t.submit()}}(this),200)}),$(".translations-table textarea").on("change",function(){return $(this).addClass("text-bold")}),console.log("init")}),window.initColorPickers=function(){return $(".color-picker").each(function(){return $(this).colorpicker()})},window.dataTablaReload=function(e){return e.DataTable().ajax.reload(null,!1)},$(document).ready(function(){return $("table.dataTable").on("draw.dt",function(){return initCheckboxes()})}),window.initDateTimePickers=function(){return $(".datepicker-birthday").datepicker({autoclose:!0,language:window.lang,todayHighlight:!0,format:birthday_format,todayBtn:!0})},$(document).on("ready",function(){return initDateTimePickers()}),function(e){var t;return t=function(){},t.busy=!1,t.options={},t.init=function(n,a){var i;return i={callback:!1,event:"change"},t.options=e.extend({},i,t.options,a),t.self=n,t.self.on(t.options.event,function(n){var a,i,r,o,s;if(n.preventDefault(),i=e(this).data("id"),o=e(this).data("url"),r=e(this).data("token"),a=e(this).data("field"),s=e(this).val()||e(this).data("value"),s=e(this).is(":checked")?1:s,void 0!==s)return e.post(o,{value:s,field:a,_token:r},function(e){if("function"==typeof t.options.callback)return t.options.callback(e)})})},e.fn.fieldChanger=function(n){return e(this).each(function(){if(!e(this).data("fieldChanger"))return t.init(e(this),n),e(this).data("fieldChanger",!0)})}}(jQuery),fields_count=1,window.addUserField=function(e){var t;return t=e.find(".duplicate").clone(!0),$ic++,t[0].innerHTML=t[0].innerHTML.replace(/replaceme/g,$ic),t.removeClass("duplicate").insertBefore(".add-field-button-block"),fixCustomInputs(t)},$(document).ready(function(){fields_count=$(".field-row").length||fields_count,$(document).on("click",".add-field-button",function(){return addUserField($(this))}),$(document).on("click",".remove-field-button",function(){var e,t;return e=$(this).data("id"),e&&(t=$(this).data("name"),$(this).closest("form").append('<input type="hidden" name="'+t+'" value="'+e+'" />')),$(this).closest(".field-row").fadeOut(function(){return $(this).remove()})})}),$ic=1,uploadStart=function(e){var t,n,a,i,r,o,s;n=e.closest("form"),s=n.attr("action"),e.is("[data-url]")&&n.attr("action",e.data("url")),i=e.attr("data-block-id"),t=$("#"+i),r="uploadframe"+(new Date).getTime(),a=$("<iframe name='"+r+"' id='"+r+"' frameborder='none' width='0' height='0' style='margin:0; padding: 0;position:absolute;'></iframe>"),$("#page-wrapper").prepend(a),t.find(".progress").show(),t.find(".progress").find(".progress-bar").css({width:"0%"}).delay(500).animate({width:"100%"},2500),t.find("img.thumbnail").attr("src","http://www.placehold.it/100x100/EFEFEF/AAAAAA&text=no+image"),n.attr("target",r),n.attr("target",r).submit(),n.attr("action",s),n.removeAttr("target"),o=setInterval("load_error('"+i+"')",1e4),a.on("load",function(e){$(this).remove(),clearInterval(o)}),e.val("")},window.uploaded=function(e,t,n){var a;a=$("#"+n),e?(a.find('input[type="hidden"]').val(e),a.find(".product_value_image").val(e),a.find("img.thumbnail").attr("src",t)):alert("Cannot save photo"),a.find(".progress").hide()},window.load_error=function(e,t){$("#"+e).find(".progress").find(".progress-bar").removeClass("progress-bar-success").addClass("progress-bar-danger"),t()},$(document).ready(function(){$("body").on("click",".upload_image",function(){var e,t;e=$(this).closest(".fileupload-canvas"),t="fileupload"+(new Date).getTime(),e.attr("id",t),$("#gallery_image").attr("name","gallery_image["+t+"]").attr("data-block-id",t).click()}),$("body").on("change","input.gallery_image_uploader",function(){""!==$(this).val()&&uploadStart($(this))})}),window.getFormData=function(e){var t;return t=new Object,$.each(e.serializeArray(),function(e,n){return t[n.name]=n.value}),t},window.clearForm=function(e){return e.find("input, textarea").each(function(){return $(this).val("")})},window.setErrors=function(e,t){var n,a;return a=500,n=0,$.each(e.responseJSON,function(e){return function(e,i){return n++,e=e.replace(".","_"),t.find("#"+e).closest(".form-group").addClass("has-error"),setTimeout(function(){return message.show(i,"error")},n*a)}}(this))},window.processError=function(e,t){var n;return t=t||null,422!==e.status?(n=e.message?e.message:lang_errorFormSubmit,message.show(n,"error")):(message.show(lang_errorValidation,"error"),t?setErrors(e,t):void 0)},$(document).ready(function(){return $(".tab-pane .has-error").each(function(){var e;return e=$(this).closest(".tab-pane"),$("a[href='#"+e.attr("id")+"']").closest("li").addClass("tab-with-errors")}),$(document).on("click",".tab-with-errors",function(){return $(this).removeClass("tab-with-errors")}),$(document).on("click",".has-error",function(){var e;return $(this).removeClass("has-error").find(".help-block.error").remove(),e=$(this).closest(".tab-pane"),$("a[href='#"+e.attr("id")+"']").closest("li").removeClass("tab-with-errors")})}),window.initCheckboxes=function(){return $('input[type="checkbox"].square, input[type="radio"].square').iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue"})},$(document).ready(function(){return $(document).on("click",".show-elfinder-button",function(){var e;return e=$(this),$("<div >").dialog({modal:!0,width:"80%",title:e.data("title"),open:function(e,t){return $(".ui-dialog").css("z-index",9999),$(".ui-widget-overlay").css("z-index",9998)},create:function(t,n){$(this).elfinder({resizable:!1,url:elfinderConnectorUrl,commandsOptions:{getfile:{oncomplete:"destroy"}},getFileCallback:function(t){$(e.data("target")).val("/"+t.path).trigger("change"),$("button.ui-dialog-titlebar-close").click()}}).elfinder("instance")}})}),$(document).find(".image_input_thumbnail").on("error",function(){return $(this).attr("src",$(this).data("default"))}),$(document).on("change","input[data-related-image]",function(){var e,t,n;return t=$(this),e=$(t.data("related-image")),n=$(this).val(),e.html(""),e.attr("src",n||e.data("default")),e.on("error",function(){return e.attr("src",e.data("default"))})}),$(document).on("click",".clear-image-button",function(){var e,t,n;return n=$(this),e=$(n.data("target-image")),t=$(n.data("target-input")),e.attr("src",e.data("default")),t.val("")})}),window.loadImagePreview=function(e,t){var n,a,i,r;return a="Microsoft Internet Explorer"===navigator.appName,i=e.value,n=i.substring(i.lastIndexOf(".")+1).toLowerCase(),"jpeg"!==n&&"jpg"!==n&&"png"!==n?($(".remove-image").click(),message.show(lang_errorIncorrectFileType,"warning")):a?($("#"+t+" img").attr("src",i),$(e).closest(".image-block").find(".remove-image").removeClass("hidden")):e.files[0]?e.files[0].size<upload_max_filesize?(r=new FileReader,r.onload=function(e){return $("#"+t+" img").attr("src",e.target.result)},r.readAsDataURL(e.files[0]),$(e).closest(".image-block").find(".remove-image").removeClass("hidden")):($(".remove-image").click(),message.show(lang_errorSelectedFileIsTooLarge,"warning")):void 0},window.resetImagePreview=function(e,t){var n;return $("#"+e+" img").attr("src",no_image),n=$("#"+e+" input[type=file]"),n.replaceWith(n.val("").clone(!0)),$("#"+t).val("")},$(document).on("ready",function(){return $(document).on("click",".remove-image",function(){var e,t;return t=$(this).data("preview_id"),e=$(this).data("image_input_id"),resetImagePreview(t,e),$(this).addClass("hidden")})}),window.initInputMask=function(){return $(".inputmask-birthday").each(function(){return $(this).inputmask(birthday_format,{placeholder:birthday_format})}),$(".inputmask-2").each(function(){return $(this).inputmask({mask:"+9999999999999999",greedy:!1,placeholder:""})}),$(".inputmask-3").each(function(){return $(this).inputmask({mask:"999 999 999 999",placeholder:" ",numericInput:!0,rightAlign:!1})})},$(document).on("ready",function(){return initInputMask()}),window.processListSelect=function(e,t){return $.ajax({url:e,type:"POST",dataType:"json",data:t,error:function(e){return function(e){return processError(e,null)}}(this),success:function(e){return function(e){return message.show(e.message,e.status)}}(this)})},window.getListSelectedData=function(e){var t,n,a;return n={},a=[],t=e.find(".list-select-item:checked"),t.length?(t.each(function(){return a.push($(this).val())}),n.items=a,e.find(".list-select-data-item").each(function(){return n[$(this).data("name")]=$(this).val()}),n):null},$(document).ready(function(){return $(".list-select-button").on("click",function(e){var t,n,a,i,r;return e.preventDefault(),t=$(this).closest(".list-select-block"),n=t.find(".list-select-action option:selected"),r=n.data("href")||null,a=n.data("closure")||null,!(!r&&!a)&&((i=getListSelectedData(t))?(a?window[a](r,i):processListSelect(r,i),!1):(message.show(lang_errorEmptyData,"warning"),!1))})}),Loading=function(){function e(e){var t,n;this.obj=e,t=$('<div id="loader" class="loading"><i class="fa fa-cog fa-spin" aria-hidden="true"></i></div>').appendTo(this.obj),n=this.obj.css("position"),"absolute"!==n&&"fixed"!==n&&"relative"!==n&&this.obj.css("position","relative")}return e.prototype.hide=function(){return this.obj.find(".loading").remove()},e}(),message={},message.delay=5e3,message.closeHandler='<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>',message.containeer=".message-container",message.info=function(e){message.show(e,"info")},message.success=function(e){message.show(e,"success")},message.warning=function(e){message.show(e,"warning")},message.error=function(e){message.show(e,"error")},message.show=function(e,t){switch(t){case"info":t="alert alert-info alert-dismissable";break;case"success":t="alert alert-success alert-dismissable";break;case"warning":t="alert alert-warning alert-dismissable";break;case"error":t="alert alert-danger alert-dismissable";break;default:t="alert alert-info alert-dismissable"}$("<div/>").html(e+message.closeHandler).addClass(t).appendTo(message.containeer).delay(message.delay).fadeOut(500,function(){$(this).remove()})},window.$modal=$("#modal"),window.dModal=function(e,t){var n,a;return t=t||!1,n=$(".modal-clone"),$(".modal-backdrop").each(function(){if(!$(this).hasClass("in"))return $(this).remove()}),n.length>0&&n.each(function(){if(!$(this).hasClass("in"))return $(this).remove()}),t?(a=$modal.clone(!1),a.addClass("modal-clone").modal("show"),a.html(e)):($modal.modal("show"),$modal.html(e)),fixCustomInputs($modal),$("#modal").each(function(){return $(this).removeAttr("tabindex")})},window.dModalHide=function(e){return e=e||!1,e?(e.modal("hide"),e.remove()):$modal.modal("hide")},$(document).ready(function(){return $(document).ajaxStart(function(){return Pace.restart()}),$(document).ajaxStop(function(){return Pace.stop()})}),window.ic=1,window.duplicate_row=function(e){var t,n;if(n=e.hasClass("duplication")?e:e.closest(".duplication"),t=n.find(".duplicate").clone(!0),0!==t.length)return window.ic++,t[0].innerHTML=t[0].innerHTML.replace(/replaseme/g,window.ic),t.removeClass("duplicate").insertBefore(n.find(".duplication-button")),t.find(".form-control").each(function(){if($(this).attr("name",$(this).data("name")),$(this).data("required"))return $(this).attr("required",$(this).data("required"))}),fixCustomInputs(t)},$(document).ready(function(){return window.ic=$(".duplication-row").length,$(".duplication.duplicate-on-start").each(function(){return duplicate_row($(this))}),$(document).on("click",".duplication .create",function(){return duplicate_row($(this))}),$(document).on("click",".duplication .destroy",function(){var e,t,n;return e=$(this),e.hasClass("exist")&&(t=e.data("id"),t&&(n=$(this).data("name"),$(this).closest("form").append('<input type="hidden" name="'+n+'" value="'+t+'" />'))),$(this).closest(".duplication-row").remove()})}),$(document).ready(function(){return $(".slim-scroll").each(function(){return $(this).slimScroll({height:parseInt($(this).data("height"))+"px"})})}),$(document).ready(function(){return $("form").each(function(){if(!$(this).hasClass("without-js-validation"))return $(this).validator().on("submit",function(e){if(e.isDefaultPrevented())return message.show(lang_errorValidation,"error")})})}),$(document).ready(function(){return $(".save-variable-value").on("click",function(e){var t,n,a,i;e.preventDefault(),t=$(this).closest("form");for(a in CKEDITOR.instances)i=CKEDITOR.instances[a].getData(),i.replace("\r\n",""),$("#"+a).val(i);return n=getFormData(t),$.ajax({url:t.attr("action"),type:"POST",dataType:"json",data:n,error:function(e){return function(e){return processError(e,t)}}(this),success:function(e){return function(e){return message.show(e.message,e.status)}}(this)}),!1})}),window.dialog=function(e,t,n,a){return bootbox.dialog({title:e,message:t,buttons:{main:{label:lang_cancel,className:"btn-default btn-flat btn-sm"},success:{label:lang_yes,className:"btn-success btn-flat btn-sm",callback:function(){return"function"==typeof a?a(n):n.submit()}}}})},$(document).ready(function(){return $(document).on("click",".simple-link-dialog",function(e){return e.preventDefault(),dialog($(this).data("title"),$(this).data("message"),null,function(e){return function(){return window.location.href=$(e).attr("href")}}(this)),!1})});